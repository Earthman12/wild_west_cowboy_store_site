{% extends 'base.html' %}
{% load static %}

{% block content %}

<!--Reddit CSS from CodingWithMitch-->
<style type="text/css">

	@media (max-width: 768px) { 
		.right-column{
			margin-left: 0px;
		}
	}

	@media (min-width: 768px) { 
		.right-column{
			margin-left: 20px;
		}
	}

	.blog-post-container{
		background-color: #fff;
		margin-bottom: 20px;
		width: 100%;
	}
	.create-post-bar{
		background-color: #fff;
		margin-bottom:20px;
	}

	.left-column{
		padding:0px;
	}

	.right-column{
		padding:0px;
	}

</style>

<div class = "container">
    <div class = "d-flex flex-column">

        <h2>These are some of our finest products!</h2>

        {% for product in products %}
    
            <div style = "border: 3px dotted white; margin: 5px; padding: 2px">
            
                {% include 'store_front/snippets/body_snippet.html' with value=product %}
    
            </div>
    
        {%  endfor %}

    </div>


    <div class = "row">

        <!-- Blog feed -->
        <div class = "left-column col-lg-7 offset-lg-1">

            <!-- Top 'create post' bar -->
            <!-- This is the top bar if the screen size is small because of 'd-lg-none' meaning if the screen size is large or bigger this whole div will disappear -->
            <div class = "d-lg-none mb-3">

                <div class = "card m-auto d-flex flex-column p-3">

                    <p class = "m-auto"><a class = "btn btn-primary" href = "{% url 'blog:create' %}">Create a post partner</a></p>

                </div>

            </div>
            <!-- End Top 'create post' bar -->

            <!-- Blog posts -->
            {% if blog_posts %}<!-- If there are blog posts, display them -->
                {% for post in blog_posts %}
                    <div class = "blog-post-container">

                        {% include 'blog/snippets/blog_post_snippet.html' with blog_post=post %}

                    </div>
                {% endfor %}

            {% else %}<!-- Otherwise we do something else -->
                <div class = "blog-post-container">
                    {% include 'blog/snippets/blog_post_snippet.html' with query=query %}
                </div>
            {% endif %}
            <!-- End Blog posts -->
            
        </div>
        <!-- End Blog feed -->

        <!-- Right 'create post' column -->
        <div class = "right-column col-lg-3 d-lg-flex d-none flex-column">

            <div class = "card create-post-bar d-flex flex-column p-3">

                <p class = "m-auto"><a class = "btn btn-primary" href = "{% url 'blog:create' %}">Create a post partner</a></p>

            </div>

        </div>
        <!-- End Right 'create post' column -->

    </div>

</div>

{% endblock content %}